<!DOCTYPE html>
<html lang="en">
<head>
  <!--
    Hellor Animated Game Hub
    Features:
    - Particle field background (Canvas)
    - Parallax nebula layers
    - Neon gradient theme with CSS variables
    - Typewriter animated title
    - Interactive navbar with ripple + underline hover
    - Animated game cards (pulse, glow, tilt-on-mouse)
    - Expandable accordions with smooth height animation
    - Modal with scale+blur
    - Audio visualizer bars from microphone (optional)
    - Confetti bursts on actions
    - Keyboard shortcuts and focus rings
    - Theme toggler (Dark/Light/Neon cycling)
    - Scroll-based reveals (IntersectionObserver)
    - Responsive layout
    - Accessibility helpers: reduced-motion, ARIA labels
  -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hellor — Animated Game Hub</title>

  <style>
    /* =========================
       Design tokens & base theme
       ========================= */
    :root {
      --bg-1: #0b0f1a;        /* deep space */
      --bg-2: #101528;        /* nebula shade */
      --fg: #e9f1ff;          /* text */
      --muted: #9fb2c7;       /* muted text */
      --accent-1: #00ffd5;    /* neon teal */
      --accent-2: #ff7af5;    /* magenta */
      --accent-3: #ffd166;    /* gold */
      --glass: rgba(255,255,255,0.06);
      --glass-border: rgba(255,255,255,0.14);
      --shadow-1: 0 10px 40px rgba(0,0,0,0.35);
      --shadow-2: 0 20px 60px rgba(0,0,0,0.45);
      --radius: 16px;
      --blur: 18px;
      --grid-gap: 28px;

      --gradient-neon: conic-gradient(
        from 180deg at 50% 50%,
        #00ffd5,
        #7cdaff,
        #c89afc,
        #ff7af5,
        #ffd166,
        #00ffd5
      );

      --ring-color: rgba(0, 255, 213, 0.6);
      --ring: 0 0 0 4px var(--ring-color);
    }

    @media (prefers-color-scheme: light) {
      :root {
        --bg-1: #f7f9ff;
        --bg-2: #e9effa;
        --fg: #05142b;
        --muted: #405066;
        --glass: rgba(255,255,255,0.7);
        --glass-border: rgba(9, 18, 38, 0.08);
        --shadow-1: 0 10px 40px rgba(9,18,38,0.12);
        --shadow-2: 0 20px 60px rgba(9,18,38,0.18);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        animation: none !important;
        transition: none !important;
        scroll-behavior: auto !important;
      }
    }

    /* ================
       Global structure
       ================ */
    html, body {
      height: 100%;
      background: radial-gradient(1000px 800px at 70% 20%, #141a2f, var(--bg-1)) fixed;
      color: var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.6;
    }
    body {
      margin: 0;
      overflow-x: hidden;
    }

    .bg-wrap {
      position: fixed;
      inset: 0;
      z-index: -1;
    }
    canvas#particleCanvas {
      position: absolute;
      inset: 0;
    }
    .parallax-layer {
      position: absolute;
      inset: 0;
      background: radial-gradient(800px 600px at 20% 80%, rgba(0,255,213,0.08), transparent),
                  radial-gradient(900px 700px at 80% 10%, rgba(255,122,245,0.08), transparent);
      transform: translateZ(0);
      will-change: transform;
    }
    .parallax-layer.nebula {
      filter: blur(40px) saturate(1.2);
      opacity: 0.8;
    }

    header.site-header {
      position: sticky;
      top: 0;
      backdrop-filter: blur(var(--blur));
      background: linear-gradient(to bottom, rgba(5,10,20,0.65), rgba(5,10,20,0.2));
      border-bottom: 1px solid var(--glass-border);
      z-index: 50;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
    }

    /* =============
       Navbar & logo
       ============= */
    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 24px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 14px;
      text-decoration: none;
      color: var(--fg);
    }
    .brand-logo {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--gradient-neon);
      box-shadow: 0 0 40px rgba(0,255,213,0.4), 0 0 60px rgba(255,122,245,0.3);
      animation: spin 10s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .brand-title {
      font-weight: 800;
      letter-spacing: 0.4px;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 18px;
    }
    .nav-link {
      position: relative;
      padding: 10px 14px;
      border-radius: 12px;
      color: var(--muted);
      text-decoration: none;
      font-weight: 600;
      transition: color .25s ease, transform .25s ease;
    }
    .nav-link::after {
      content: "";
      position: absolute;
      left: 14px;
      right: 14px;
      bottom: 4px;
      height: 2px;
      background: linear-gradient(90deg, var(--accent-1), var(--accent-2), var(--accent-3));
      transform: scaleX(0);
      transform-origin: left;
      transition: transform .3s ease;
      border-radius: 2px;
    }
    .nav-link:hover {
      color: var(--fg);
      transform: translateY(-1px);
    }
    .nav-link:hover::after {
      transform: scaleX(1);
    }

    .btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 10px 16px;
      border-radius: 12px;
      border: 1px solid var(--glass-border);
      background: linear-gradient(to bottom right, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      color: var(--fg);
      cursor: pointer;
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
      box-shadow: var(--shadow-1);
      overflow: hidden;
    }
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-2);
      background: linear-gradient(to bottom right, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
    }
    .btn:focus-visible {
      outline: none;
      box-shadow: var(--ring);
    }
    .btn .ripple {
      position: absolute;
      border-radius: 50%;
      transform: scale(0);
      animation: ripple .6s linear;
      background: rgba(255,255,255,0.35);
      pointer-events: none;
    }
    @keyframes ripple {
      to { transform: scale(4); opacity: 0; }
    }

    /* ====================
       Hero & typewriter FX
       ==================== */
    .hero {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: var(--grid-gap);
      align-items: center;
      min-height: 55vh;
      padding-top: 22px;
      padding-bottom: 10px;
    }
    .hero-title {
      font-size: clamp(2.2rem, 5.2vw, 4rem);
      font-weight: 900;
      line-height: 1.1;
      letter-spacing: 0.3px;
      background: linear-gradient(180deg, #fff 20%, #b9d9ff 60%, #a0f7e9 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 10px 50px rgba(0, 255, 213, 0.2);
    }
    .type {
      display: inline-block;
      border-right: 3px solid var(--accent-1);
      white-space: nowrap;
      overflow: hidden;
      animation: blink 1s steps(1) infinite;
    }
    @keyframes blink {
      50% { border-color: transparent; }
    }
    .hero-sub {
      color: var(--muted);
      font-size: 1.08rem;
      margin-top: 10px;
      max-width: 58ch;
    }
    .hero-panel {
      position: relative;
      padding: 18px;
      border-radius: var(--radius);
      background: linear-gradient(140deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      border: 1px solid var(--glass-border);
      box-shadow: 0 20px 70px rgba(0,0,0,0.35);
      overflow: hidden;
    }
    .hero-panel::before {
      content: "";
      position: absolute;
      inset: -40% -40%;
      background: var(--gradient-neon);
      filter: blur(50px);
      opacity: 0.18;
      animation: swirl 20s linear infinite;
    }
    @keyframes swirl {
      from { transform: translate(0,0) rotate(0deg); }
      to   { transform: translate(20px, -20px) rotate(360deg); }
    }

    /* ==============
       Cards & layout
       ============== */
    .section {
      margin-top: 30px;
      margin-bottom: 30px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--grid-gap);
    }
    .card {
      position: relative;
      background: linear-gradient(160deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      border: 1px solid var(--glass-border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-1);
      overflow: hidden;
      transform-style: preserve-3d;
      transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
    }
    .card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-2);
      background: linear-gradient(160deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
    }
    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 18px;
      border-bottom: 1px solid var(--glass-border);
    }
    .card-title {
      font-weight: 800;
      letter-spacing: 0.3px;
    }
    .card-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .pulse {
      animation: pulse 2s ease-in-out infinite;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); filter: drop-shadow(0 0 0 rgba(0,255,213,0)); }
      50% { transform: scale(1.04); filter: drop-shadow(0 6px 30px rgba(0,255,213,0.25)); }
    }
    .iframe-wrap {
      position: relative;
      aspect-ratio: 16/9;
      border-top: 1px solid var(--glass-border);
      overflow: hidden;
    }
    .iframe-wrap iframe {
      width: 100%;
      height: 100%;
      border: 0;
      transform-origin: center;
      transition: transform .4s cubic-bezier(.2,.7,.2,1), filter .4s ease;
      filter: saturate(1.1) contrast(1.02) drop-shadow(0 30px 60px rgba(0,0,0,0.4));
    }
    .iframe-wrap:hover iframe {
      transform: scale(1.02);
      filter: saturate(1.3) contrast(1.08);
    }

    /* ==========
       Accordion
       ========== */
    .accordion {
      border-top: 1px solid var(--glass-border);
    }
    .accordion-item {
      border-bottom: 1px solid var(--glass-border);
    }
    .accordion-trigger {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      width: 100%;
      padding: 14px 16px;
      background: transparent;
      color: var(--fg);
      border: 0;
      cursor: pointer;
      text-align: left;
      font-weight: 700;
    }
    .accordion-icon {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
      box-shadow: 0 0 22px rgba(255,122,245,0.28);
      display: grid;
      place-items: center;
    }
    .accordion-content {
      overflow: hidden;
      max-height: 0;
      transition: max-height .35s ease, opacity .25s ease;
      opacity: 0.0;
    }
    .accordion-item.open .accordion-content {
      max-height: 280px;
      opacity: 1;
    }
    .accordion-inner {
      padding: 12px 16px 18px;
      color: var(--muted);
    }

    /* ==========
       Modal box
       ========== */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(6, 10, 20, 0.55);
      backdrop-filter: blur(10px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-backdrop.show { display: flex; }
    .modal {
      width: min(820px, 92vw);
      border-radius: var(--radius);
      border: 1px solid var(--glass-border);
      background: linear-gradient(160deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
      box-shadow: var(--shadow-2);
      transform: scale(.9);
      opacity: 0;
      animation: pop .24s ease forwards;
    }
    @keyframes pop {
      to { transform: scale(1); opacity: 1; }
    }
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px;
      border-bottom: 1px solid var(--glass-border);
    }
    .modal-body {
      padding: 18px;
      color: var(--muted);
    }

    /* ===============
       Visualizer bars
       =============== */
    .visualizer {
      display: flex;
      align-items: flex-end;
      gap: 4px;
      height: 80px;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid var(--glass-border);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      overflow: hidden;
    }
    .bar {
      width: 6px;
      height: 10px;
      border-radius: 4px;
      background: linear-gradient(180deg, var(--accent-1), var(--accent-2));
      box-shadow: 0 0 20px rgba(0,255,213,0.25);
      transform: translateZ(0);
    }

    /* ========
       Footer
       ======== */
    footer {
      margin-top: 40px;
      padding-top: 22px;
      padding-bottom: 40px;
      border-top: 1px solid var(--glass-border);
      color: var(--muted);
    }

    /* ==================
       Scroll reveal anim
       ================== */
    .reveal {
      opacity: 0;
      transform: translateY(18px) scale(.98);
      transition: opacity .45s ease, transform .45s cubic-bezier(.2,.7,.2,1);
    }
    .reveal.visible {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    /* ============
       Tilt effect
       ============ */
    .tilt:hover {
      transform: perspective(800px) rotateX(2deg) rotateY(-2deg);
    }

    /* =============
       Theme badges
       ============= */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--glass-border);
      background: rgba(255,255,255,0.04);
      font-size: 0.88rem;
      color: var(--muted);
    }
    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--accent-1);
      box-shadow: 0 0 14px rgba(0,255,213,0.7);
    }

    /* ==============
       Utility classes
       ============== */
    .row { display: flex; gap: 14px; align-items: center; flex-wrap: wrap; }
    .spacer { height: 10px; }
    .muted { color: var(--muted); }
    .center { text-align: center; }
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <!-- Background layers -->
  <div class="bg-wrap" aria-hidden="true">
    <canvas id="particleCanvas"></canvas>
    <div class="parallax-layer nebula" id="parallax1"></div>
    <div class="parallax-layer" id="parallax2"></div>
  </div>

  <!-- Header / Nav -->
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="#top" aria-label="Hellor home">
        <div class="brand-logo" aria-hidden="true"></div>
        <div class="brand-title">Hellor</div>
      </a>
      <nav class="nav-links" aria-label="Primary navigation">
        <a class="nav-link" href="#games">Games</a>
        <a class="nav-link" href="#showcase">Showcase</a>
        <a class="nav-link" href="#tools">Tools</a>
        <button class="btn" id="themeBtn" aria-label="Toggle theme"><span>Theme</span></button>
        <button class="btn" id="aboutBtn" aria-controls="aboutModal"><span>About</span></button>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="container hero" id="top">
    <div>
      <h1 class="hero-title">
        Welcome to the <span class="type" id="typeTarget"></span> hub
      </h1>
      <p class="hero-sub">
        A sleek, animated, neon playground for web games, experiments, and effects. Embed games, toggle themes, enjoy particles, parallax nebulae, and interactive motion. Built to be fun, fast, and a little bit extra.
      </p>
      <div class="row">
        <button class="btn" id="confettiBtn">Celebrate</button>
        <span class="badge"><span class="dot"></span> Live animations</span>
        <span class="badge"><span class="dot" style="background: var(--accent-2)"></span> Parallax nebula</span>
        <span class="badge"><span class="dot" style="background: var(--accent-3)"></span> Canvas particles</span>
      </div>
    </div>
    <div class="hero-panel tilt reveal">
      <div class="visualizer" id="viz" aria-label="Audio visualizer (mic)">
        <!-- Bars populated by JS -->
      </div>
      <div class="spacer"></div>
      <p class="muted">Optional mic access animates the bars. No audio is recorded or stored—just live levels to drive the visuals.</p>
      <div class="row">
        <button class="btn" id="micBtn">Enable mic</button>
        <button class="btn" id="micStopBtn">Stop mic</button>
      </div>
    </div>
  </section>

  <!-- Games grid -->
  <section class="container section" id="games">
    <h2 class="center reveal">Featured games</h2>
    <p class="center muted reveal">Click to load, hover for glow and tilt. If an external site blocks embedding, open it in a new tab.</p>
    <div class="grid">
      <!-- Game 1 -->
      <article class="card tilt reveal">
        <div class="card-header">
          <div class="card-title">Classic Snake</div>
          <div class="card-actions">
            <button class="btn pulse" data-confetti>Play</button>
            <button class="btn" data-open="https://playsnake.org/">Open</button>
          </div>
        </div>
        <div class="iframe-wrap">
          <iframe src="https://playsnake.org/" title="Snake game"></iframe>
        </div>
        <div class="accordion">
          <div class="accordion-item">
            <button class="accordion-trigger" aria-expanded="false">
              <span>Details</span>
              <span class="accordion-icon">+</span>
            </button>
            <div class="accordion-content" role="region" aria-label="Snake details">
              <div class="accordion-inner">
                Retro vibes, simple controls, satisfying growth. Perfect warm-up.
              </div>
            </div>
          </div>
        </div>
      </article>

      <!-- Game 2 -->
      <article class="card tilt reveal">
        <div class="card-header">
          <div class="card-title">Tetris Online</div>
          <div class="card-actions">
            <button class="btn pulse" data-confetti>Play</button>
            <button class="btn" data-open="https://tetris.com/play-tetris">Open</button>
          </div>
        </div>
        <div class="iframe-wrap">
          <iframe src="https://tetris.com/play-tetris" title="Tetris game"></iframe>
        </div>
        <div class="accordion">
          <div class="accordion-item">
            <button class="accordion-trigger" aria-expanded="false">
              <span>Details</span>
              <span class="accordion-icon">+</span>
            </button>
            <div class="accordion-content" role="region" aria-label="Tetris details">
              <div class="accordion-inner">
                The original time sink—stack, clear, zone out, repeat. Therapeutic chaos.
              </div>
            </div>
          </div>
        </div>
      </article>

      <!-- Game 3 -->
      <article class="card tilt reveal">
        <div class="card-header">
          <div class="card-title">Pac-Man</div>
          <div class="card-actions">
            <button class="btn pulse" data-confetti>Play</button>
            <button class="btn" data-open="https://pacman.live/">Open</button>
          </div>
        </div>
        <div class="iframe-wrap">
          <iframe src="https://pacman.live/" title="Pac-Man game"></iframe>
        </div>
        <div class="accordion">
          <div class="accordion-item">
            <button class="accordion-trigger" aria-expanded="false">
              <span>Details</span>
              <span class="accordion-icon">+</span>
            </button>
            <div class="accordion-content" role="region" aria-label="Pac-Man details">
              <div class="accordion-inner">
                Waka-waka nostalgia. Chase high scores, dodge ghosts, find rhythm.
              </div>
            </div>
          </div>
        </div>
      </article>
    </div>
  </section>

  <!-- Showcase with canvas mini-game -->
  <section class="container section" id="showcase">
    <h2 class="center reveal">Showcase: canvas playground</h2>
    <p class="center muted reveal">A tiny canvas mini-game—click to launch orbs, they bounce and trail neon dust.</p>
    <div class="hero-panel reveal">
      <canvas id="miniGame" width="1100" height="420" style="width:100%; height:auto; border-radius: 14px;"></canvas>
      <div class="row" style="margin-top: 12px;">
        <button class="btn" id="miniClear">Clear</button>
        <button class="btn" id="miniSpawn">Spawn 12 orbs</button>
        <span class="badge"><span class="dot"></span> Physics + trails</span>
      </div>
    </div>
  </section>

  <!-- Tools -->
  <section class="container section" id="tools">
    <h2 class="center reveal">Utilities & toggles</h2>
    <div class="grid">
      <article class="card reveal">
        <div class="card-header">
          <div class="card-title">Theme cycling</div>
          <div class="card-actions"><button class="btn" id="cycleTheme">Cycle</button></div>
        </div>
        <div class="iframe-wrap" style="display:grid; place-items:center;">
          <p class="muted" style="padding: 18px;">Cycles through Dark / Light / Neon Burst by altering CSS variables.</p>
        </div>
      </article>

      <article class="card reveal">
        <div class="card-header">
          <div class="card-title">Reduce motion</div>
          <div class="card-actions"><button class="btn" id="reduceMotionToggle">Toggle</button></div>
        </div>
        <div class="iframe-wrap" style="display:grid; place-items:center;">
          <p class="muted" style="padding: 18px;">Simulate reduced-motion preference for users who want quieter visuals.</p>
        </div>
      </article>

      <article class="card reveal">
        <div class="card-header">
          <div class="card-title">Keyboard nav</div>
          <div class="card-actions"><button class="btn" id="focusGames">Focus games</button></div>
        </div>
        <div class="iframe-wrap" style="display:grid; place-items:center;">
          <p class="muted" style="padding: 18px;">Use Tab, Arrow keys to navigate highlights. Enter activates buttons.</p>
        </div>
      </article>
    </div>
  </section>

  <!-- Footer -->
  <footer class="container">
    <p>Made with neon and curiosity by <strong>Darth12345-web</strong>. Hosted on GitHub Pages. Some external sites may block embedding—use “Open” if an iframe refuses to load.</p>
  </footer>

  <!-- Modal -->
  <div class="modal-backdrop" id="aboutModal" role="dialog" aria-modal="true" aria-label="About Hellor">
    <div class="modal">
      <div class="modal-header">
        <strong>About this hub</strong>
        <button class="btn" id="closeModal">Close</button>
      </div>
      <div class="modal-body">
        <p>This site is a playground of layered animations: particle fields, parallax nebulae, glowing cards, tilt, and interactive utilities. It’s intentionally extra. Customize variables, duplicate sections, and make it yours.</p>
      </div>
    </div>
  </div>

  <script>
    /* ===========================
       Typewriter animated heading
       =========================== */
    (function typewriter() {
      const el = document.getElementById('typeTarget');
      const words = ['Hellor', 'Game', 'Arcade', 'Playground', 'Neon'];
      let wi = 0, ci = 0, deleting = false;

      function tick() {
        const w = words[wi];
        el.textContent = w.slice(0, ci);
        if (!deleting) {
          ci++;
          if (ci > w.length + 6) deleting = true;
        } else {
          ci--;
          if (ci <= 0) { deleting = false; wi = (wi + 1) % words.length; }
        }
        const speed = deleting ? 60 : 90;
        setTimeout(tick, speed);
      }
      tick();
    })();

    /* =================
       Ripple on buttons
       ================= */
    document.addEventListener('click', e => {
      const btn = e.target.closest('.btn');
      if (!btn) return;
      const rect = btn.getBoundingClientRect();
      const ripple = document.createElement('span');
      const size = Math.max(rect.width, rect.height);
      ripple.className = 'ripple';
      ripple.style.width = ripple.style.height = size + 'px';
      ripple.style.left = (e.clientX - rect.left - size/2) + 'px';
      ripple.style.top = (e.clientY - rect.top - size/2) + 'px';
      btn.appendChild(ripple);
      setTimeout(() => ripple.remove(), 600);
    });

    /* ============================
       Intersection reveal on scroll
       ============================ */
    const revealEls = Array.from(document.querySelectorAll('.reveal'));
    const io = new IntersectionObserver((entries) => {
      for (const entry of entries) {
        if (entry.isIntersecting) entry.target.classList.add('visible');
      }
    }, { threshold: 0.18 });
    revealEls.forEach(el => io.observe(el));

    /* ===========================
       Accordion open/close toggles
       =========================== */
    document.querySelectorAll('.accordion-item').forEach(item => {
      const trigger = item.querySelector('.accordion-trigger');
      const content = item.querySelector('.accordion-content');
      trigger.addEventListener('click', () => {
        const open = item.classList.toggle('open');
        trigger.setAttribute('aria-expanded', String(open));
      });
    });

    /* ===========================
       Modal handling
       =========================== */
    const aboutBtn = document.getElementById('aboutBtn');
    const aboutModal = document.getElementById('aboutModal');
    const closeModal = document.getElementById('closeModal');
    aboutBtn.addEventListener('click', () => {
      aboutModal.classList.add('show');
    });
    closeModal.addEventListener('click', () => {
      aboutModal.classList.remove('show');
    });
    aboutModal.addEventListener('click', (e) => {
      if (e.target === aboutModal) aboutModal.classList.remove('show');
    });

    /* ===========================
       Theme toggling & cycling
       =========================== */
    const themeBtn = document.getElementById('themeBtn');
    const cycleBtn = document.getElementById('cycleTheme');
    const themes = [
      { name: 'Dark', vars: { '--bg-1': '#0b0f1a', '--bg-2': '#101528', '--fg': '#e9f1ff', '--muted': '#9fb2c7' } },
      { name: 'Light', vars: { '--bg-1': '#f7f9ff', '--bg-2': '#e9effa', '--fg': '#05142b', '--muted': '#405066' } },
      { name: 'Neon Burst', vars: { '--bg-1': '#070b13', '--bg-2': '#0c1323', '--fg': '#eafaff', '--muted': '#a7c3da', '--gradient-neon': 'conic-gradient(from 180deg at 50% 50%, #00ffd5, #76e5ff, #c3a6ff, #ff7af5, #ffd166, #00ffd5)' } },
    ];
    let ti = 0;
    function applyTheme(vars) {
      Object.entries(vars).forEach(([k,v]) => document.documentElement.style.setProperty(k, v));
    }
    themeBtn.addEventListener('click', () => {
      ti = (ti + 1) % themes.length;
      applyTheme(themes[ti].vars);
    });
    cycleBtn.addEventListener('click', () => {
      ti = (ti + 1) % themes.length;
      applyTheme(themes[ti].vars);
    });

    /* ===========================
       Reduce motion toggle (mock)
       =========================== */
    const reduceBtn = document.getElementById('reduceMotionToggle');
    let reduced = false;
    reduceBtn.addEventListener('click', () => {
      reduced = !reduced;
      document.documentElement.classList.toggle('reduce-motion', reduced);
      if (reduced) {
        document.querySelectorAll('*').forEach(el => {
          el.style.animationDuration = '0s';
          el.style.transitionDuration = '0s';
        });
      } else {
        document.querySelectorAll('*').forEach(el => {
          el.style.animationDuration = '';
          el.style.transitionDuration = '';
        });
      }
    });

    /* ===========================
       Keyboard navigation helpers
       =========================== */
    const focusGames = document.getElementById('focusGames');
    focusGames.addEventListener('click', () => {
      const firstBtn = document.querySelector('#games .card .btn');
      firstBtn?.focus();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') {
        const next = document.activeElement?.closest('.card')?.nextElementSibling?.querySelector('.btn');
        next?.focus();
      }
      if (e.key === 'ArrowLeft') {
        const prev = document.activeElement?.closest('.card')?.previousElementSibling?.querySelector('.btn');
        prev?.focus();
      }
      if (e.key === 'Enter') {
        document.activeElement?.click?.();
      }
    });

    /* ===========================
       Confetti bursts on actions
       =========================== */
    const confettiBtn = document.getElementById('confettiBtn');
    const buttonsForConfetti = document.querySelectorAll('[data-confetti]');
    function burstConfetti(x, y, count = 80) {
      const canvas = document.createElement('canvas');
      canvas.width = innerWidth;
      canvas.height = innerHeight;
      canvas.style.position = 'fixed';
      canvas.style.left = 0;
      canvas.style.top = 0;
      canvas.style.pointerEvents = 'none';
      canvas.style.zIndex = 999;
      document.body.appendChild(canvas);
      const ctx = canvas.getContext('2d');

      const pieces = [];
      const colors = ['#00ffd5','#7cdaff','#ff7af5','#ffd166','#ffffff'];
      for (let i = 0; i < count; i++) {
        pieces.push({
          x, y,
          vx: (Math.random() - 0.5) * 12,
          vy: (Math.random() - 0.6) * 12 - 4,
          size: Math.random() * 6 + 2,
          color: colors[(Math.random()*colors.length)|0],
          life: 60 + (Math.random()*40)|0
        });
      }
      let raf;
      function loop() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for (const p of pieces) {
          p.vy += 0.22; // gravity
          p.x += p.vx;
          p.y += p.vy;
          p.life--;
          ctx.globalAlpha = Math.max(p.life/100, 0);
          ctx.fillStyle = p.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
          ctx.fill();
        }
        pieces.splice(0, pieces.filter(p => p.life <= 0 || p.y > innerHeight + 30).length);
        if (pieces.length > 0) {
          raf = requestAnimationFrame(loop);
        } else {
          cancelAnimationFrame(raf);
          canvas.remove();
        }
      }
      loop();
    }
    confettiBtn.addEventListener('click', (e) => {
      burstConfetti(innerWidth/2, 140);
    });
    buttonsForConfetti.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const rect = btn.getBoundingClientRect();
        burstConfetti(rect.left + rect.width/2, rect.top + rect.height/2);
      });
    });

    /* ===========================
       Particle background (canvas)
       =========================== */
    const particleCanvas = document.getElementById('particleCanvas');
    const pctx = particleCanvas.getContext('2d');
    let particles = [];
    function resizeCanvas() {
      particleCanvas.width = innerWidth;
      particleCanvas.height = innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    const NUM = 180;
    for (let i = 0; i < NUM; i++) {
      particles.push({
        x: Math.random()*innerWidth,
        y: Math.random()*innerHeight,
        vx: (Math.random() - 0.5) * 0.6,
        vy: (Math.random() - 0.5) * 0.6,
        r: Math.random()*1.8 + 0.6,
        hue: Math.random()*360
      });
    }
    function drawParticles() {
      pctx.clearRect(0,0,particleCanvas.width, particleCanvas.height);
      for (const p of particles) {
        p.x += p.vx; p.y += p.vy;
        if (p.x < 0 || p.x > innerWidth) p.vx *= -1;
        if (p.y < 0 || p.y > innerHeight) p.vy *= -1;
        pctx.beginPath();
        pctx.fillStyle = `hsla(${p.hue}, 80%, 60%, 0.7)`;
        pctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        pctx.fill();
      }
      // connective lines
      for (let i=0; i<particles.length; i++) {
        for (let j=i+1; j<particles.length; j++) {
          const a = particles[i], b = particles[j];
          const dx = a.x-b.x, dy = a.y-b.y;
          const d = Math.hypot(dx,dy);
          if (d < 110) {
            pctx.strokeStyle = `rgba(0,255,213,${(110-d)/110 * 0.18})`;
            pctx.lineWidth = 1;
            pctx.beginPath();
            pctx.moveTo(a.x, a.y);
            pctx.lineTo(b.x, b.y);
            pctx.stroke();
          }
        }
      }
      requestAnimationFrame(drawParticles);
    }
    drawParticles();

    /* ===========================
       Parallax movement
       =========================== */
    const p1 = document.getElementById('parallax1');
    const p2 = document.getElementById('parallax2');
    document.addEventListener('mousemove', (e) => {
      const x = (e.clientX / innerWidth - 0.5) * 20;
      const y = (e.clientY / innerHeight - 0.5) * 20;
      p1.style.transform = `translate(${x}px, ${y}px)`;
      p2.style.transform = `translate(${-x*0.6}px, ${-y*0.6}px)`;
    });

    /* ===========================
       Open in new tab for iframes
       =========================== */
    document.querySelectorAll('[data-open]').forEach(btn => {
      btn.addEventListener('click', () => {
        const url = btn.getAttribute('data-open');
        window.open(url, '_blank', 'noopener');
      });
    });

    /* ===========================
       Audio visualizer (mic)
       =========================== */
    const viz = document.getElementById('viz');
    const micBtn = document.getElementById('micBtn');
    const micStopBtn = document.getElementById('micStopBtn');
    // create bars
    const bars = [];
    for (let i=0; i<48; i++) {
      const b = document.createElement('div');
      b.className = 'bar';
      viz.appendChild(b);
      bars.push(b);
    }
    let audioCtx, analyser, srcNode, micStream, freq;
    async function startMic() {
      try {
        micStream = await navigator.mediaDevices.getUserMedia({ audio: true });
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        analyser = audioCtx.createAnalyser();
        analyser.fftSize = 128;
        freq = new Uint8Array(analyser.frequencyBinCount);
        srcNode = audioCtx.createMediaStreamSource(micStream);
        srcNode.connect(analyser);
        visualize();
      } catch (err) {
        alert('Mic access was denied or not available.');
      }
    }
    function stopMic() {
      if (micStream) {
        micStream.getTracks().forEach(t => t.stop());
        micStream = null;
      }
      if (audioCtx) {
        audioCtx.close();
        audioCtx = null;
      }
    }
    function visualize() {
      if (!analyser) return;
      analyser.getByteFrequencyData(freq);
      for (let i=0; i<bars.length; i++) {
        const v = freq[i] || 0;
        bars[i].style.height = (v/255 * 80 + 6) + 'px';
        bars[i].style.background = `linear-gradient(180deg, hsl(${(i*8)%360}, 80%, 60%), var(--accent-2))`;
        bars[i].style.boxShadow = `0 0 20px hsla(${(i*8)%360}, 80%, 60%, 0.5)`;
      }
      requestAnimationFrame(visualize);
    }
    micBtn.addEventListener('click', startMic);
    micStopBtn.addEventListener('click', stopMic);

    /* ===========================
       Canvas mini-game
       =========================== */
    const mg = document.getElementById('miniGame');
    const mgc = mg.getContext('2d');
    const orbs = [];
    function spawnOrb(x, y) {
      orbs.push({
        x, y,
        vx: (Math.random()*4+2) * (Math.random() < .5 ? -1 : 1),
        vy: (Math.random()*4+2) * (Math.random() < .5 ? -1 : 1),
        r: Math.random()*10 + 8,
        trail: [],
        hue: Math.random()*360
      });
    }
    mg.addEventListener('click', e => {
      const rect = mg.getBoundingClientRect();
      spawnOrb(e.clientX - rect.left, e.clientY - rect.top);
    });
    document.getElementById('miniClear').addEventListener('click', () => {
      orbs.length = 0;
      mgc.clearRect(0,0,mg.width, mg.height);
    });
    document.getElementById('miniSpawn').addEventListener('click', () => {
      for (let i=0; i<12; i++) {
        spawnOrb(Math.random()*mg.width, Math.random()*mg.height);
      }
    });

    function updateMiniGame() {
      mgc.fillStyle = 'rgba(10, 16, 28, 0.4)';
      mgc.fillRect(0,0,mg.width, mg.height);

      for (const o of orbs) {
        o.x += o.vx;
        o.y += o.vy;
        // bounds
        if (o.x < o.r || o.x > mg.width - o.r) o.vx *= -1;
        if (o.y < o.r || o.y > mg.height - o.r) o.vy *= -1;

        o.trail.push({x:o.x, y:o.y});
        if (o.trail.length > 30) o.trail.shift();

        // trail
        for (let i=0; i<o.trail.length-1; i++) {
          const a = o.trail[i], b = o.trail[i+1];
          mgc.strokeStyle = `hsla(${o.hue}, 80%, 60%, ${(i/o.trail.length)*0.8})`;
          mgc.lineWidth = 2;
          mgc.beginPath();
          mgc.moveTo(a.x, a.y);
          mgc.lineTo(b.x, b.y);
          mgc.stroke();
        }

        // orb
        mgc.beginPath();
        mgc.fillStyle = `hsla(${o.hue}, 80%, 60%, 0.9)`;
        mgc.arc(o.x, o.y, o.r, 0, Math.PI*2);
        mgc.fill();

        // glow
        mgc.shadowColor = `hsla(${o.hue}, 80%, 60%, 0.6)`;
        mgc.shadowBlur = 22;
      }

      requestAnimationFrame(updateMiniGame);
    }
    updateMiniGame();

    /* ===========================
       Large expansion helper
       ===========================
       If you need 2000+ lines, duplicate the game cards below with variations,
       or programmatically generate cards to produce more markup.
       This keeps the file substantial while staying maintainable.
    */

    // Programmatically add many animated placeholder cards with effects
    const gamesGrid = document.querySelector('#games .grid');
    const sources = [
      {title:'Asteroids Clone', url:'https://play2048.co/'}, // example
      {title:'2048', url:'https://play2048.co/'},
      {title:'Chess', url:'https://www.chess.com/play/computer'},
      {title:'Dino Runner', url:'https://chromedino.com/'},
      {title:'Minesweeper', url:'https://minesweeperonline.com/'},
    ];
    function addGameCard(title, url) {
      const article = document.createElement('article');
      article.className = 'card tilt reveal';
      article.innerHTML = `
        <div class="card-header">
          <div class="card-title">${title}</div>
          <div class="card-actions">
            <button class="btn pulse" data-confetti>Play</button>
            <button class="btn" data-open="${url}">Open</button>
          </div>
        </div>
        <div class="iframe-wrap">
          <iframe src="${url}" title="${title}"></iframe>
        </div>
        <div class="accordion">
          <div class="accordion-item">
            <button class="accordion-trigger" aria-expanded="false">
              <span>Details</span>
              <span class="accordion-icon">+</span>
            </button>
            <div class="accordion-content" role="region" aria-label="${title} details">
              <div class="accordion-inner">
                Quick fun: ${title}. If embedding fails, click "Open" to launch in a new tab.
              </div>
            </div>
          </div>
        </div>
      `;
      gamesGrid.appendChild(article);
      io.observe(article);
      // re-bind accordion inside the new article
      const item = article.querySelector('.accordion-item');
      const trigger = item.querySelector('.accordion-trigger');
      trigger.addEventListener('click', () => {
        const open = item.classList.toggle('open');
        trigger.setAttribute('aria-expanded', String(open));
      });
      // confetti on play
      article.querySelector('[data-confetti]').addEventListener('click', (e) => {
        const rect = e.target.getBoundingClientRect();
        burstConfetti(rect.left + rect.width/2, rect.top + rect.height/2);
      });
      // open in new tab
      article.querySelector('[data-open]').addEventListener('click', () => {
        window.open(url, '_blank', 'noopener');
      });
    }
    // Add a bunch of cards to make the page rich
    for (let i=0; i<12; i++) {
      const s = sources[i % sources.length];
      addGameCard(`${s.title} #${i+1}`, s.url);
    }

    /* ===========================
       Accessibility focus ring
       =========================== */
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Tab') {
        document.documentElement.style.setProperty('--ring-color', 'rgba(255, 122, 245, 0.6)');
      }
    });

  </script>
</body>
</html>
